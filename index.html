<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Luciferium</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0b0b0b;
      color: #f2f2f2;
    }
    header {
      background: #161616;
      padding: 1rem 2rem;
      text-align: center;
      border-bottom: 1px solid #333;
    }
    header h1 {
      font-size: 2.5rem;
      color: #ff2e2e;
      letter-spacing: 3px;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
      background: #111;
      padding: 1rem;
    }
    nav a {
      color: #ccc;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      color: #ff2e2e;
    }
    .hero {
      background: #0e0e0e;
      padding: 4rem 2rem;
      text-align: center;
      border-bottom: 1px solid #222;
    }
    .hero h2 {
      font-size: 2.2rem;
      color: #fff;
      text-shadow: 1px 1px 8px #000;
    }
    .section {
      padding: 3rem 2rem;
      max-width: 800px;
      margin: auto;
    }
    .section h3 {
      color: #ff2e2e;
      font-size: 1.7rem;
      margin-bottom: 1rem;
    }
    .footer {
      background: #111;
      text-align: center;
      padding: 2rem;
      font-size: 0.9rem;
      color: #666;
    }
    .btn {
      display: inline-block;
      background: #ff2e2e;
      color: white;
      padding: 0.8rem 1.2rem;
      text-decoration: none;
      border-radius: 5px;
      margin-top: 1rem;
    }
    form label {
      display: block;
      margin-bottom: 1rem;
    }
    input {
      padding: 0.5rem;
      background: #222;
      border: 1px solid #444;
      border-radius: 4px;
      color: #f2f2f2;
      width: 100%;
    }
    button {
      background: #ff2e2e;
      border: none;
      padding: 0.6rem 1rem;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border-radius: 4px;
    }
    button:hover {
      background: #d92626;
    }
    .password-container {
      position: relative;
    }
    .toggle-password {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #f2f2f2;
      cursor: pointer;
    }
    .logo-img {
      display: block;
      margin: 1rem auto 2rem;
      max-width: 300px;
    }
    .message {
      margin-top: 1rem;
      font-weight: bold;
      text-align: center;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>LUCIFERIUM</h1>
  </header>
  <nav>
    <a href="#univers">L'univers</a>
    <a href="#connexion">Connexion</a>
    <a href="#cadeaux">Cadeaux</a>
    <a href="#forum">Forum</a>
  </nav>

  <div class="hero">
    <h2>Ouvrez les portes de l'ombre</h2>
    <img src="https://via.placeholder.com/300x100?text=Luciferium+Logo" alt="Logo Luciferium" class="logo-img" />
    <a href="#connexion" class="btn">Connexion / Inscription</a>
  </div>

  <section id="univers" class="section">
    <h3>Bienvenue dans l'univers de Luciferium</h3>
    <p>
      Luciferium est une application unique m√™lant mythe, spiritualit√© et interaction avec les forces de l'ombre. Une
      exp√©rience sensorielle compl√®te, appuy√©e par un forum, des cadeaux mystiques et une ambiance sonore t√©n√©breuse.
    </p>
  </section>

  <section id="connexion" class="section">
    <h3>Connexion / Inscription</h3>
    <form id="authForm">
      <label>Email : <input type="email" id="email" required /></label>
      <label>
        Mot de passe :
        <div class="password-container">
          <input type="password" id="password" required />
          <button type="button" class="toggle-password" onclick="togglePassword()">üëÅ</button>
        </div>
      </label>
      <button type="submit" id="submitBtn">S'inscrire</button>
    </form>
    <div class="message" id="message"></div>
    <div style="text-align:center; margin-top:1rem;">
      <button id="toggleModeBtn" class="btn">Passer √† la connexion</button>
      <button id="logoutBtn" class="btn hidden">Se d√©connecter</button>
    </div>
  </section>

  <section id="cadeaux" class="section">
    <h3>Cadeaux & Codes Mystiques</h3>
    <div id="cadeauxContent">
      <p>Des codes seront distribu√©s √† nos fid√®les pour d√©bloquer des secrets cach√©s dans l'application. Activez-les dans votre compte pour b√©n√©ficier de bonus exclusifs.</p>
    </div>
    <div id="cadeauxLocked" class="hidden">
      <p>Vous devez √™tre connect√© pour acc√©der aux cadeaux.</p>
    </div>
  </section>

  <section id="forum" class="section">
   <h3>Forum</h3>

<div id="forumArea">
  <div id="messagesList" style="max-height:300px; overflow-y:auto; border:1px solid #444; padding:10px; background:#111; margin-bottom:1rem;"></div>

  <form id="messageForm">
    <label for="messageInput">Votre message :</label>
    <textarea id="messageInput" rows="3" required style="width:100%; background:#222; color:#f2f2f2; border:1px solid #444; border-radius:4px; padding:0.5rem;"></textarea>
    <button type="submit" style="margin-top:0.5rem; background:#ff2e2e; color:#fff; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">Envoyer</button>
  </form>
</div>

<div id="forumLocked" class="hidden">
  <p>Vous devez √™tre connect√© pour acc√©der au forum.</p>
</div>
      <p>Un lieu pour discuter entre initi√©s, partager vos exp√©riences avec l'app ou explorer les myst√®res de Luciferium. (Forum actif apr√®s inscription.)</p>
    </div>
    <div id="forumLocked" class="hidden">
      <p>Vous devez √™tre connect√© pour acc√©der au forum.</p>
    </div>
  </section>

  <div class="footer">¬© 2025 Luciferium - Tous droits r√©serv√©s.</div>

  <script>
    const authForm = document.getElementById('authForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const messageDiv = document.getElementById('message');
    const submitBtn = document.getElementById('submitBtn');
    const toggleModeBtn = document.getElementById('toggleModeBtn');
    const logoutBtn = document.getElementById('logoutBtn');

    const cadeauxContent = document.getElementById('cadeauxContent');
    const cadeauxLocked = document.getElementById('cadeauxLocked');
    const forumContent = document.getElementById('forumContent');
    const forumLocked = document.getElementById('forumLocked');

    let mode = 'signup'; // 'signup' or 'login'

    function togglePassword() {
      passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
    }

    function updateUI() {
      const user = JSON.parse(localStorage.getItem('luciferiumUser'));
      if (user && user.loggedIn) {
        // Utilisateur connect√©
        submitBtn.style.display = 'none';
        toggleModeBtn.style.display = 'none';
        logoutBtn.classList.remove('hidden');
        messageDiv.textContent = `Bienvenue, ${user.email} !`;

        cadeauxContent.classList.remove('hidden');
        cadeauxLocked.classList.add('hidden');
        forumContent.classList.remove('hidden');
        forumLocked.classList.add('hidden');
      } else {
        // Pas connect√©
        submitBtn.style.display = 'inline-block';
        toggleModeBtn.style.display = 'inline-block';
        logoutBtn.classList.add('hidden');
        messageDiv.textContent = '';

        cadeauxContent.classList.add('hidden');
        cadeauxLocked.classList.remove('hidden');
        forumContent.classList.add('hidden');
        forumLocked.classList.remove('hidden');
      }
    }

    authForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const email = emailInput.value.trim().toLowerCase();
      const password = passwordInput.value;

      if (mode === 'signup') {
        if (localStorage.getItem(`luciferiumUser_${email}`)) {
          messageDiv.textContent = 'Cet email est d√©j√† utilis√©.';
          messageDiv.style.color = 'orange';
          return;
        }
        // Enregistrer nouvel utilisateur
        localStorage.setItem(`luciferiumUser_${email}`, JSON.stringify({email, password}));
        localStorage.setItem('luciferiumUser', JSON.stringify({email, loggedIn: true}));
        messageDiv.textContent = 'Inscription r√©ussie ! Vous √™tes connect√©.';
        messageDiv.style.color = 'lightgreen';
        updateUI();
      } else {
        // Mode connexion
        const stored = localStorage.getItem(`luciferiumUser_${email}`);
        if (!stored) {
          messageDiv.textContent = 'Email non trouv√©.';
          messageDiv.style.color = 'orange';
          return;
        }
        const user = JSON.parse(stored);
        if (user.password !== password) {
          messageDiv.textContent = 'Mot de passe incorrect.';
          messageDiv.style.color = 'orange';
          return;
        }
        // Connexion r√©ussie
        localStorage.setItem('luciferiumUser', JSON.stringify({email, loggedIn: true}));
        messageDiv.textContent = 'Connexion r√©ussie !';
        messageDiv.style.color = 'lightgreen';
        updateUI();
      }
    });

    toggleModeBtn.addEventListener('click', () => {
      mode = mode === 'signup' ? 'login' : 'signup';
      submitBtn.textContent = mode === 'signup' ? "S'inscrire" : 'Se connecter';
      toggleModeBtn.textContent = mode === 'signup' ? 'Passer √† la connexion' : "Passer √† l'inscription";
      messageDiv.textContent = '';
      emailInput.value = '';
      passwordInput.value = '';
    });

    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('luciferiumUser');
      messageDiv.textContent = 'Vous √™tes d√©connect√©.';
      messageDiv.style.color = 'lightblue';
      updateUI();
    });

    // Au chargement de la page, on met √† jour l'interface
    updateUI();
  </script>// Fonction pour afficher les messages dans la liste
function displayMessages() {
  const messagesList = document.getElementById('messagesList');
  let messages = JSON.parse(localStorage.getItem('luciferiumMessages')) || [];

  if (messages.length === 0) {
    messagesList.innerHTML = '<p>Aucun message pour le moment. Soyez le premier √† √©crire !</p>';
    return;
  }

  // On trie par date (la plus r√©cente en bas)
  messages.sort((a, b) => new Date(a.date) - new Date(b.date));

  messagesList.innerHTML = '';
  messages.forEach(msg => {
    const msgDiv = document.createElement('div');
    msgDiv.style.borderBottom = '1px solid #333';
    msgDiv.style.padding = '0.3rem 0';

    const date = new Date(msg.date);
    const dateStr = date.toLocaleString();

    msgDiv.innerHTML = `<strong>${msg.pseudo}</strong> <em style="font-size:0.8rem; color:#888;">(${dateStr})</em><br>${escapeHtml(msg.text)}`;

    messagesList.appendChild(msgDiv);
  });

  // Scroll vers le bas pour voir le dernier message
  messagesList.scrollTop = messagesList.scrollHeight;
}

// Fonction pour √©chapper le html dans le message (s√©curit√© basique)
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// Gestion de l'envoi de message
const messageForm = document.getElementById('messageForm');
messageForm.addEventListener('submit', function(e) {
  e.preventDefault();

  const messageInput = document.getElementById('messageInput');
  const text = messageInput.value.trim();
  if (text.length === 0) return;

  // R√©cup√©rer l'utilisateur connect√©
  const userData = JSON.parse(localStorage.getItem('luciferiumUser'));
  if (!userData || !userData.loggedIn) {
    alert('Vous devez √™tre connect√© pour poster un message.');
    return;
  }

  const pseudo = userData.email.split('@')[0] || 'Anonyme';
  const newMsg = {
    pseudo,
    text,
    date: new Date().toISOString()
  };

  let messages = JSON.parse(localStorage.getItem('luciferiumMessages')) || [];
  messages.push(newMsg);
  localStorage.setItem('luciferiumMessages', JSON.stringify(messages));

  messageInput.value = '';
  displayMessages();
});

// Afficher les messages au chargement
displayMessages();

// Afficher ou cacher le forum selon si l'utilisateur est connect√©
function updateForumVisibility() {
  const userData = JSON.parse(localStorage.getItem('luciferiumUser'));
  const forumArea = document.getElementById('forumArea');
  const forumLocked = document.getElementById('forumLocked');
  if (userData && userData.loggedIn) {
    forumArea.classList.remove('hidden');
    forumLocked.classList.add('hidden');
  } else {
    forumArea.classList.add('hidden');
    forumLocked.classList.remove('hidden');
  }
}
updateForumVisibility();

// Mettre √† jour la visibilit√© quand on se connecte ou d√©connecte
const originalUpdateUI = updateUI;
updateUI = function() {
  originalUpdateUI();
  updateForumVisibility();
};

</body>
</html>
