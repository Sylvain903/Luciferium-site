<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Luciferium</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #0b0b0b;
    color: #f2f2f2;
  }
  header {
    background: #161616;
    padding: 1rem 2rem;
    text-align: center;
    border-bottom: 1px solid #333;
  }
  header h1 {
    font-size: 2.5rem;
    color: #ff2e2e;
    letter-spacing: 3px;
  }
  nav {
    display: flex;
    justify-content: center;
    gap: 2rem;
    background: #111;
    padding: 1rem;
  }
  nav a, nav button {
    color: #ccc;
    text-decoration: none;
    font-weight: bold;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
  }
  nav a:hover, nav button:hover {
    color: #ff2e2e;
  }
  .hero {
    background: #0e0e0e;
    padding: 4rem 2rem;
    text-align: center;
    border-bottom: 1px solid #222;
  }
  .hero h2 {
    font-size: 2.2rem;
    color: #fff;
    text-shadow: 1px 1px 8px #000;
  }
  .section {
    padding: 3rem 2rem;
    max-width: 800px;
    margin: auto;
  }
  .section h3 {
    color: #ff2e2e;
    font-size: 1.7rem;
    margin-bottom: 1rem;
  }
  .footer {
    background: #111;
    text-align: center;
    padding: 2rem;
    font-size: 0.9rem;
    color: #666;
  }
  form label {
    display: block;
    margin-bottom: 1rem;
  }
  input, textarea {
    padding: 0.5rem;
    background: #222;
    border: 1px solid #444;
    border-radius: 4px;
    color: #f2f2f2;
    width: 100%;
    box-sizing: border-box;
  }
  button, nav button {
    background: #ff2e2e;
    border: none;
    padding: 0.6rem 1rem;
    color: white;
    font-weight: bold;
    cursor: pointer;
    border-radius: 4px;
  }
  button:hover, nav button:hover {
    background: #d92626;
  }
  .password-container {
    position: relative;
  }
  .toggle-password {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #f2f2f2;
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0;
  }
  .logo-img {
    display: block;
    margin: 1rem auto 2rem;
    max-width: 300px;
  }
  .hidden {
    display: none !important;
  }
  #forumArea {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #444;
    padding: 10px;
    background: #111;
    margin-bottom: 1rem;
  }
</style>
</head>
<body>

<header>
  <h1>LUCIFERIUM</h1>
</header>

<nav>
  <a href="#univers">L'univers</a>
  <a href="#connexion">Connexion</a>
  <a href="#cadeaux">Cadeaux</a>
  <a href="#forum">Forum</a>
  <button id="logoutBtn" class="hidden">D√©connexion</button>
</nav>

<div class="hero">
  <h2>Ouvrez les portes de l'ombre</h2>
  <img src="https://via.placeholder.com/300x100?text=Luciferium+Logo" alt="Logo Luciferium" class="logo-img" />
</div>

<section id="univers" class="section">
  <h3>Bienvenue dans l'univers de Luciferium</h3>
  <p>Luciferium est une application unique m√™lant mythe, spiritualit√© et interaction avec les forces de l'ombre. Une exp√©rience sensorielle compl√®te, appuy√©e par un forum, des cadeaux mystiques et une ambiance sonore t√©n√©breuse.</p>
</section>

<!-- Section connexion visible uniquement si pas connect√© -->
<section id="connexion" class="section">
  <h3>Connexion / Inscription</h3>
  <form id="loginForm" autocomplete="off">
    <label>Email : <input type="email" id="email" required autocomplete="username" /></label>
    <label>Mot de passe :
      <div class="password-container">
        <input type="password" id="password" required autocomplete="current-password" />
        <button type="button" class="toggle-password" onclick="togglePassword()">üëÅ</button>
      </div>
    </label>
    <button type="submit">Se connecter / S'inscrire</button>
  </form>
</section>

<section id="cadeaux" class="section">
  <h3>Cadeaux & Codes Mystiques</h3>
  <p>Des codes seront distribu√©s √† nos fid√®les pour d√©bloquer des secrets cach√©s dans l'application. Activez-les dans votre compte pour b√©n√©ficier de bonus exclusifs.</p>
</section>

<section id="forum" class="section">
  <h3>Forum</h3>

  <div id="forumArea" class="hidden">
    <div id="messagesList"></div>

    <form id="messageForm">
      <label for="messageInput">Votre message :</label>
      <textarea id="messageInput" rows="3" required></textarea>
      <button type="submit" style="margin-top: 0.5rem;">Envoyer</button>
    </form>
  </div>

  <div id="forumLocked" class="section">
    <p>Vous devez √™tre connect√© pour acc√©der au forum.</p>
  </div>
</section>

<div class="footer">
  ¬© 2025 Luciferium - Tous droits r√©serv√©s.
</div>

<script>
  function togglePassword() {
    const pwd = document.getElementById('password');
    pwd.type = pwd.type === 'password' ? 'text' : 'password';
  }

  function displayMessages() {
    const messagesList = document.getElementById('messagesList');
    let messages = JSON.parse(localStorage.getItem('luciferiumMessages')) || [];

    if (messages.length === 0) {
      messagesList.innerHTML = '<p>Aucun message pour le moment. Soyez le premier √† √©crire !</p>';
      return;
    }

    messages.sort((a, b) => new Date(a.date) - new Date(b.date));

    messagesList.innerHTML = '';
    messages.forEach(msg => {
      const msgDiv = document.createElement('div');
      msgDiv.style.borderBottom = '1px solid #333';
      msgDiv.style.padding = '0.3rem 0';

      const date = new Date(msg.date);
      const dateStr = date.toLocaleString();

      msgDiv.innerHTML = `<strong>${msg.pseudo}</strong> <em style="font-size:0.8rem; color:#888;">(${dateStr})</em><br>${escapeHtml(msg.text)}`;
      messagesList.appendChild(msgDiv);
    });

    messagesList.scrollTop = messagesList.scrollHeight;
  }

  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  const loginForm = document.getElementById('loginForm');
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();

    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');

    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if (!email || !password) {
      alert('Veuillez remplir tous les champs.');
      return;
    }

    const userData = {
      email,
      loggedIn: true
    };

    localStorage.setItem('luciferiumUser', JSON.stringify(userData));

    alert(`Bienvenue, ${email.split('@')[0]} !`);

    updateUI();

    loginForm.reset();
  });

  const messageForm = document.getElementById('messageForm');
  messageForm.addEventListener('submit', function(e) {
    e.preventDefault();

    const messageInput = document.getElementById('messageInput');
    const text = messageInput.value.trim();
    if (text.length === 0) return;

    const userData = JSON.parse(localStorage.getItem('luciferiumUser'));
    if (!userData || !userData.loggedIn) {
      alert('Vous devez √™tre connect√© pour poster un message.');
      return;
    }

    const pseudo = userData.email.split('@')[0] || 'Anonyme';
    const newMsg = {
      pseudo,
      text,
      date: new Date().toISOString()
    };

    let messages = JSON.parse(localStorage.getItem('luciferiumMessages')) || [];
    messages.push(newMsg);
    localStorage.setItem('luciferiumMessages', JSON.stringify(messages));

    messageInput.value = '';
    displayMessages();
  });

  const logoutBtn = document.getElementById('logoutBtn');
  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem('luciferiumUser');
    alert('Vous √™tes d√©connect√©.');
    updateUI();
  });

  function updateUI() {
    const userData = JSON.parse(localStorage.getItem('luciferiumUser'));

    const forumArea = document.getElementById('forumArea');
    const forumLocked = document.getElementById('forumLocked');
    const connexionSection = document.getElementById('connexion');
    const logoutBtn = document.getElementById('logoutBtn');

    if (userData && userData.loggedIn) {
      forumArea.classList.remove('hidden');
      forumLocked.classList.add('hidden');
      connexionSection.classList.add('hidden');
      logoutBtn.classList.remove('hidden');
    } else {
      forumArea.classList.add('hidden');
      forumLocked.classList.remove('hidden');
      connexionSection.classList.remove('hidden');
      logoutBtn.classList.add('hidden');
    }
  }

  window.onload = () => {
    displayMessages();
    updateUI();
  };
</script>

</body>
</html>
